{"ast":null,"code":"import { authService } from './authService';\nconst API_URL = 'http://localhost/api';\nconst getHeaders = () => {\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  const token = authService.getToken();\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  return headers;\n};\n\n// Users API\nexport const fetchUsers = async () => {\n  const response = await fetch(`${API_URL}/users`, {\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to fetch users');\n  return response.json();\n};\nexport const createUser = async user => {\n  const response = await fetch(`${API_URL}/users`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(user)\n  });\n  if (!response.ok) throw new Error('Failed to create user');\n  return response.json();\n};\nexport const updateUser = async (id, user) => {\n  const response = await fetch(`${API_URL}/users/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(user)\n  });\n  if (!response.ok) throw new Error('Failed to update user');\n  return response.json();\n};\nexport const deleteUser = async id => {\n  const response = await fetch(`${API_URL}/users/${id}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to delete user');\n  return response.json();\n};\nexport const deleteAllUsers = async () => {\n  const response = await fetch(`${API_URL}/users`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to delete all users');\n  return response.json();\n};\n\n// Devices API\nexport const fetchDevices = async () => {\n  const response = await fetch(`${API_URL}/devices`, {\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to fetch devices');\n  return response.json();\n};\nexport const createDevice = async device => {\n  const response = await fetch(`${API_URL}/devices`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(device)\n  });\n  if (!response.ok) throw new Error('Failed to create device');\n  return response.json();\n};\nexport const updateDevice = async (id, device) => {\n  const response = await fetch(`${API_URL}/devices/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(device)\n  });\n  if (!response.ok) throw new Error('Failed to update device');\n  return response.json();\n};\nexport const updateDeviceName = async (id, name) => {\n  const response = await fetch(`${API_URL}/devices/${id}/name`, {\n    method: 'PATCH',\n    headers: getHeaders(),\n    body: JSON.stringify({\n      name\n    })\n  });\n  if (!response.ok) throw new Error('Failed to update device name');\n  return response.json();\n};\nexport const updateDeviceConsumption = async (id, consumption) => {\n  const response = await fetch(`${API_URL}/devices/${id}/consumption`, {\n    method: 'PATCH',\n    headers: getHeaders(),\n    body: JSON.stringify({\n      consumption\n    })\n  });\n  if (!response.ok) throw new Error('Failed to update device consumption');\n  return response.json();\n};\nexport const deleteAllDevices = async () => {\n  const response = await fetch(`${API_URL}/devices`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to delete all devices');\n  return response.json();\n};\n\n// Assignments API\nexport const fetchAssignments = async () => {\n  const response = await fetch(`${API_URL}/devices/assignments`, {\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to fetch assignments');\n  return response.json();\n};\nexport const assignDeviceToUser = async (userId, deviceId) => {\n  const response = await fetch(`${API_URL}/devices/assign`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify({\n      userId,\n      deviceId\n    })\n  });\n  if (!response.ok) throw new Error('Failed to assign device');\n  return response.json();\n};\nexport const deleteAllAssignments = async () => {\n  const response = await fetch(`${API_URL}/devices/assignments`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Failed to delete all assignments');\n  return response.json();\n};\n\n// Keep the api object for backward compatibility\nexport const api = {\n  getUsers: fetchUsers,\n  createUser,\n  updateUser,\n  deleteUser,\n  deleteAllUsers,\n  getDevices: fetchDevices,\n  createDevice,\n  updateDevice,\n  updateDeviceName,\n  updateDeviceConsumption,\n  deleteAllDevices,\n  fetchAssignments,\n  assignDevice: assignDeviceToUser,\n  deleteAllAssignments\n};","map":{"version":3,"names":["authService","API_URL","getHeaders","headers","token","getToken","fetchUsers","response","fetch","ok","Error","json","createUser","user","method","body","JSON","stringify","updateUser","id","deleteUser","deleteAllUsers","fetchDevices","createDevice","device","updateDevice","updateDeviceName","name","updateDeviceConsumption","consumption","deleteAllDevices","fetchAssignments","assignDeviceToUser","userId","deviceId","deleteAllAssignments","api","getUsers","getDevices","assignDevice"],"sources":["P:/Cursuri/Cursuri/SD/labCode/lab/frontend/src/api.js"],"sourcesContent":["import { authService } from './authService';\r\n\r\nconst API_URL = 'http://localhost/api';\r\n\r\nconst getHeaders = () => {\r\n  const headers = { 'Content-Type': 'application/json' };\r\n  const token = authService.getToken();\r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n  return headers;\r\n};\r\n\r\n// Users API\r\nexport const fetchUsers = async () => {\r\n  const response = await fetch(`${API_URL}/users`, {\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to fetch users');\r\n  return response.json();\r\n};\r\n\r\nexport const createUser = async (user) => {\r\n  const response = await fetch(`${API_URL}/users`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(user)\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create user');\r\n  return response.json();\r\n};\r\n\r\nexport const updateUser = async (id, user) => {\r\n  const response = await fetch(`${API_URL}/users/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(user)\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update user');\r\n  return response.json();\r\n};\r\n\r\nexport const deleteUser = async (id) => {\r\n  const response = await fetch(`${API_URL}/users/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to delete user');\r\n  return response.json();\r\n};\r\n\r\nexport const deleteAllUsers = async () => {\r\n  const response = await fetch(`${API_URL}/users`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to delete all users');\r\n  return response.json();\r\n};\r\n\r\n// Devices API\r\nexport const fetchDevices = async () => {\r\n  const response = await fetch(`${API_URL}/devices`, {\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to fetch devices');\r\n  return response.json();\r\n};\r\n\r\nexport const createDevice = async (device) => {\r\n  const response = await fetch(`${API_URL}/devices`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(device)\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create device');\r\n  return response.json();\r\n};\r\n\r\nexport const updateDevice = async (id, device) => {\r\n  const response = await fetch(`${API_URL}/devices/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(device)\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update device');\r\n  return response.json();\r\n};\r\n\r\nexport const updateDeviceName = async (id, name) => {\r\n  const response = await fetch(`${API_URL}/devices/${id}/name`, {\r\n    method: 'PATCH',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify({ name })\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update device name');\r\n  return response.json();\r\n};\r\n\r\nexport const updateDeviceConsumption = async (id, consumption) => {\r\n  const response = await fetch(`${API_URL}/devices/${id}/consumption`, {\r\n    method: 'PATCH',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify({ consumption })\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update device consumption');\r\n  return response.json();\r\n};\r\n\r\nexport const deleteAllDevices = async () => {\r\n  const response = await fetch(`${API_URL}/devices`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to delete all devices');\r\n  return response.json();\r\n};\r\n\r\n// Assignments API\r\nexport const fetchAssignments = async () => {\r\n  const response = await fetch(`${API_URL}/devices/assignments`, {\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to fetch assignments');\r\n  return response.json();\r\n};\r\n\r\nexport const assignDeviceToUser = async (userId, deviceId) => {\r\n  const response = await fetch(`${API_URL}/devices/assign`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify({ userId, deviceId })\r\n  });\r\n  if (!response.ok) throw new Error('Failed to assign device');\r\n  return response.json();\r\n};\r\n\r\nexport const deleteAllAssignments = async () => {\r\n  const response = await fetch(`${API_URL}/devices/assignments`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders()\r\n  });\r\n  if (!response.ok) throw new Error('Failed to delete all assignments');\r\n  return response.json();\r\n};\r\n\r\n// Keep the api object for backward compatibility\r\nexport const api = {\r\n  getUsers: fetchUsers,\r\n  createUser,\r\n  updateUser,\r\n  deleteUser,\r\n  deleteAllUsers,\r\n  getDevices: fetchDevices,\r\n  createDevice,\r\n  updateDevice,\r\n  updateDeviceName,\r\n  updateDeviceConsumption,\r\n  deleteAllDevices,\r\n  fetchAssignments,\r\n  assignDevice: assignDeviceToUser,\r\n  deleteAllAssignments\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}